from Crypto.Util.number import *
from sympy.ntheory.modular import crt
from sympy import integer_nthroot
import os
import re

current_dir = os.path.dirname(__file__)
file_path = os.path.join(current_dir, "output.txt")

ciphertexts = []
moduli = []

with open(file_path) as f:
    r = f.readlines()
    var = 0
    for i in r:
        x = ''.join(re.findall("[0-9]",i))
        if x == '':
            continue
        y = int(x)
        if y != 3:
            var ^= 1
            if var:
                ciphertexts.append(y)
            else:
                moduli.append(y)


chinese = crt(moduli,ciphertexts)[0]
flag = long_to_bytes(integer_nthroot(chinese,3)[0]).decode()

print(flag)